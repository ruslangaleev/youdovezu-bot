# Роли и возможности пользователей

## Общее описание

В приложении YouDovezu пользователи могут иметь различные роли и возможности в зависимости от их статуса регистрации и проверки документов.

**Примечание:** Подробное описание ролей Offerer и Requester см. в разделе [Роли в системе](./system-roles.md).

## Статусы пользователя

### Пользователь в процессе регистрации

**Характеристики:**
- Не завершил все шаги регистрации
- Видит только экран завершения регистрации
- Не может использовать функции приложения

**Ограничения:**
- Нет доступа к главному меню
- Не может создавать поездки
- Не может искать поездки
- Не может загружать документы

### Активный пользователь

**Характеристики:**
- Завершил регистрацию
- Имеет доступ ко всем функциям приложения
- Может создавать и управлять поездками

**Возможности:**
- Доступ к главному меню
- Создание поездок
- Просмотр списка своих поездок
- Редактирование своих поездок
- Удаление своих поездок
- Загрузка документов для водительского режима

### Заблокированный пользователь

**Характеристики:**
- Заблокирован администратором
- Доступ к приложению запрещен

**Ограничения:**
- Нет доступа к приложению
- Все функции недоступны

## Функциональные роли

### Попутчик, которому нужен автомобиль

**Условие получения:**
- Согласие с политикой конфиденциальности

**Возможности:**
- Просмотр списка своих запросов на поездки (страница "Мои поездки")
- Создание новых запросов на поездки
- Редактирование своих запросов
- Удаление своих запросов
- Публикация запроса на поездку и ожидание предложений от попутчиков, которые предоставляют машину
- Получение предложений с указанием цены от попутчиков, которые предоставляют машину (в будущем)
- Одобрение предложений и организация поездки (в будущем)

**Отображение:**
- В главном меню отображается статус пользователя

### Попутчик, который предоставляет машину

**Условие получения:**
- Подтверждение водительских данных (выполняется через Telegram бота)
- Загрузка и одобрение документов (водительское удостоверение, СТС, аватарка)

**Возможности:**
- Все возможности попутчика, которому нужен автомобиль (может создавать свои запросы на поездки)
- Просмотр опубликованных запросов от других попутчиков
- Предложение своих услуг попутчикам, которым нужен автомобиль, с указанием цены
- Получение одобрений от попутчиков, которым нужен автомобиль
- Выполнение поездок для попутчиков, которым нужен автомобиль

**Триал:**
- 14 дней бесплатного использования после подтверждения водительских данных
- Отображается как "(Триал)" в статусе пользователя

**Отображение:**
- В главном меню отображается статус пользователя

**Примечание:** Попутчики, которые предоставляют машину, не создают поездки для других. Они просматривают запросы попутчиков, которым нужен автомобиль, и предлагают свои услуги. Попутчики, которым нужен автомобиль, создают запросы на поездки, а попутчики, которые предоставляют машину, на них откликаются.

### Модератор

**Условие получения:**
- Назначается администратором

**Возможности:**
- Все возможности обычного пользователя
- Модерация контента
- Управление пользователями
- Просмотр статистики
- Проверка документов водителей

### Администратор

**Условие получения:**
- Назначается системой

**Возможности:**
- Все возможности модератора
- Полное управление системой
- Управление пользователями и их правами
- Просмотр аналитики и статистики
- Проверка и одобрение/отклонение документов водителей

## Отображение ролей

### В главном меню

Пользователь видит свои роли внизу главного меню:

- Статус отображается в зависимости от возможностей пользователя
- **(Триал)** — если активен триальный период для водителя

### Примеры статусов

**Новый пользователь:**
- Не зарегистрирован
- Видит экран завершения регистрации

**Активный попутчик, которому нужен автомобиль:**
- Завершил регистрацию
- Согласился с политикой конфиденциальности
- Может публиковать запросы на поездки

**Активный попутчик, который предоставляет машину (триал):**
- Завершил регистрацию
- Документы проверены и одобрены
- Триал активен (14 дней)
- Может просматривать запросы и предлагать услуги

**Активный попутчик с обеими возможностями:**
- Завершил регистрацию
- Может публиковать запросы на поездки
- Может просматривать запросы других попутчиков и предлагать услуги

## Переходы между ролями

### От нового пользователя к попутчику, которому нужен автомобиль

1. Пользователь соглашается с политикой конфиденциальности
2. Получает возможность публиковать запросы на поездки
3. Может публиковать запросы и ожидать предложения от попутчиков, которые предоставляют машину

### От попутчика, которому нужен автомобиль, к попутчику, который предоставляет машину

1. Пользователь загружает документы (ВУ, СТС, аватарка)
2. Документы отправляются на проверку
3. Администратор проверяет документы
4. Если документы одобрены:
   - Пользователь получает доступ к просмотру запросов других попутчиков
   - Начинается триальный период (14 дней)
   - Может просматривать запросы попутчиков, которым нужен автомобиль
   - Может предлагать свои услуги попутчикам, которым нужен автомобиль

## Ограничения по ролям

### Попутчик, которому нужен автомобиль

- Может создавать запросы на поездки
- Может публиковать запросы и ожидать предложения от попутчиков, которые предоставляют машину
- Не может просматривать запросы других попутчиков (требуется проверка документов)

### Попутчик, который предоставляет машину

- Может просматривать запросы попутчиков, которым нужен автомобиль
- Может предлагать свои услуги с указанием цены
- Может получать одобрения от попутчиков, которым нужен автомобиль
- Может выполнять поездки для попутчиков, которым нужен автомобиль
- Может использовать все функции попутчика, которому нужен автомобиль (создавать свои запросы)
- Триал ограничен 14 днями

### Модератор/Администратор

- Полный доступ ко всем функциям
- Могут модерировать контент
- Могут управлять пользователями

## Примечания

- Один пользователь может иметь несколько ролей одновременно
- Роли могут изменяться администратором
- Статус пользователя отображается в главном меню
- Доступ к функциям определяется ролью пользователя

